{
  "name": "hera_kernel",
  "description": "Guardrailed access to the HERA DNA kernel (emit events, upsert entities, upsert relationships)",
  "tools": [
    {
      "name": "hera_txn_emit_v1",
      "description": "Emit a universal event header + lines following the universal schema",
      "input_schema": {
        "$ref": "../schemas/universal_event.schema.json"
      },
      "output": {
        "type": "object",
        "properties": {
          "transaction_id": {
            "type": "string"
          }
        }
      }
    },
    {
      "name": "hera_entity_upsert_v1",
      "description": "Upsert entity with attributes routed to core_dynamic_data",
      "input_schema": {
        "type": "object",
        "required": [
          "organization_id",
          "entity_type",
          "entity_name",
          "smart_code"
        ],
        "properties": {
          "organization_id": {
            "type": "string",
            "format": "uuid"
          },
          "entity_type": {
            "type": "string"
          },
          "entity_name": {
            "type": "string"
          },
          "smart_code": {
            "type": "string",
            "pattern": "^HERA\\.[A-Z]+\\.[A-Z]+\\.[A-Z]+\\.[A-Z]+\\.[vV][0-9]+$"
          },
          "entity_code": {
            "type": [
              "string",
              "null"
            ]
          },
          "attributes": {
            "type": "object"
          }
        }
      },
      "output": {
        "type": "object",
        "properties": {
          "entity_id": {
            "type": "string"
          }
        }
      }
    },
    {
      "name": "hera_relationship_upsert_v1",
      "description": "Create/update a relationship between two entities",
      "input_schema": {
        "type": "object",
        "required": [
          "organization_id",
          "from_entity_id",
          "to_entity_id",
          "relationship_type",
          "smart_code"
        ],
        "properties": {
          "organization_id": {
            "type": "string",
            "format": "uuid"
          },
          "from_entity_id": {
            "type": "string"
          },
          "to_entity_id": {
            "type": "string"
          },
          "relationship_type": {
            "type": "string"
          },
          "smart_code": {
            "type": "string",
            "pattern": "^HERA\\.[A-Z]+\\.[A-Z]+\\.[A-Z]+\\.[A-Z]+\\.[vV][0-9]+$"
          }
        }
      },
      "output": {
        "type": "object",
        "properties": {
          "relationship_id": {
            "type": "string"
          }
        }
      }
    }
  ]
}