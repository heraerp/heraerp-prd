'use client'

import React from 'react'
import { useAuth } from '@/contexts/auth-context'
import { Button } from '@/components/ui/button'
import { Card } from '@/components/ui/card'
import { 
  Gem, 
  ShoppingBag, 
  Users, 
  Package, 
  Wrench, 
  TrendingUp,
  DollarSign,
  Bell,
  Search,
  Plus,
  BarChart3,
  Crown,
  Sparkles
} from 'lucide-react'

// Generated by HERA DNA - Jewelry Module v1.0
// Architecture: Universal 6-Table Schema
// Smart Codes: HERA.JWLY.* namespace

const jewelryModules = [
  {
    id: 'pos',
    title: 'Point of Sale',
    description: 'Premium sales experience with AI upselling',
    icon: ShoppingBag,
    color: 'from-blue-500 to-blue-600',
    url: '/jewelry-progressive/pos',
    smartCode: 'HERA.JWLY.POS.DASHBOARD.v1',
    metrics: { todaySales: '$24,650', transactions: 18 }
  },
  {
    id: 'inventory',
    title: 'Inventory',
    description: 'Jewelry catalog with AI demand forecasting',
    icon: Package,
    color: 'from-purple-500 to-purple-600',
    url: '/jewelry-progressive/inventory',
    smartCode: 'HERA.JWLY.INV.DASHBOARD.v1',
    metrics: { totalItems: '2,847', lowStock: 23 }
  },
  {
    id: 'customers',
    title: 'Customers',
    description: 'VIP client management with preferences',
    icon: Users,
    color: 'from-green-500 to-green-600',
    url: '/jewelry-progressive/customers',
    smartCode: 'HERA.JWLY.CRM.DASHBOARD.v1',
    metrics: { vipClients: '486', loyaltyActive: '89%' }
  },
  {
    id: 'repairs',
    title: 'Repairs & Custom',
    description: 'Repair orders and custom design workflow',
    icon: Wrench,
    color: 'from-orange-500 to-orange-600',
    url: '/jewelry-progressive/repairs',
    smartCode: 'HERA.JWLY.RPR.DASHBOARD.v1',
    metrics: { activeOrders: 47, avgCompletion: '5.2 days' }
  },
  {
    id: 'analytics',
    title: 'Business Intelligence',
    description: 'AI-powered insights and trend analysis',
    icon: BarChart3,
    color: 'from-indigo-500 to-indigo-600',
    url: '/jewelry-progressive/analytics',
    smartCode: 'HERA.JWLY.AI.ANALYTICS.v1',
    metrics: { profitMargin: '42.8%', topCategory: 'Engagement Rings' }
  },
  {
    id: 'suppliers',
    title: 'Suppliers',
    description: 'Vendor management and purchasing',
    icon: TrendingUp,
    color: 'from-pink-500 to-pink-600',
    url: '/jewelry-progressive/suppliers',
    smartCode: 'HERA.JWLY.SUP.DASHBOARD.v1',
    metrics: { activeSuppliers: 28, avgDelivery: '3.1 days' }
  }
]

function JewelryDashboard() {
  const { workspace, isAnonymous } = useAuth()

  const handleLogout = async () => {
    await logout()
    // Stay on jewelry-progressive as it supports anonymous users
    window.location.reload()
  }

  // Public access - jewelry-progressive is publicly accessible

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-50 to-purple-50">
      {/* Header */}
      <header className="bg-white/80 backdrop-blur-md border-b border-gray-200">
        <div className="max-w-7xl mx-auto px-6">
          <div className="flex justify-between items-center h-16">
            <div className="flex items-center gap-4">
              <div className="w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center">
                <Gem className="w-6 h-6 text-white" />
              </div>
              <div>
                <h1 className="text-xl font-bold text-gray-900">JewelryMaster Pro</h1>
                <p className="text-xs text-gray-500">HERA Universal Architecture</p>
              </div>
            </div>

            <div className="flex items-center gap-4">
              <Button variant="ghost" size="sm">
                <Search className="w-4 h-4" />
              </Button>
              <Button variant="ghost" size="sm">
                <Bell className="w-4 h-4" />
              </Button>
              <Button
                onClick={handleLogout}
                variant="ghost"
                size="sm"
                className="text-gray-600"
              >
                {user?.full_name || 'User'}
              </Button>
            </div>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-6 py-8">
        {/* Welcome Section */}
        <div className="mb-12 text-center">
          <div className="inline-flex items-center gap-2 bg-gradient-to-r from-purple-100 to-pink-100 px-6 py-2 rounded-full mb-6">
            <Crown className="w-4 h-4 text-purple-600" />
            <span className="text-sm font-medium text-purple-800">Luxury Jewelry Management</span>
            <Sparkles className="w-4 h-4 text-pink-600" />
          </div>
          <h2 className="text-4xl font-light text-gray-900 mb-4">
            Welcome to your jewelry empire, {user?.full_name?.split(' ')[0] || 'User'}.
          </h2>
          <p className="text-xl text-gray-600 font-light max-w-2xl mx-auto">
            Every diamond tells a story. Every sale builds dreams. 
            Your business deserves software as precious as your jewelry.
          </p>
        </div>

        {/* Quick Stats */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12">
          <Card className="p-6 bg-white/60 backdrop-blur border-0 shadow-lg">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-2xl font-bold text-gray-900">$847K</p>
                <p className="text-sm text-gray-600">Monthly Revenue</p>
              </div>
              <DollarSign className="w-8 h-8 text-green-500" />
            </div>
          </Card>
          
          <Card 
            className="p-6 bg-white/60 backdrop-blur border-0 shadow-lg cursor-pointer hover:shadow-xl transition-all duration-300 hover:-translate-y-1 group"
            onClick={() => window.location.href = '/jewelry-progressive/inventory'}
          >
            <div className="flex items-center justify-between">
              <div>
                <p className="text-2xl font-bold text-gray-900 group-hover:text-purple-700">2,847</p>
                <p className="text-sm text-gray-600">Jewelry Items → Inventory</p>
              </div>
              <Gem className="w-8 h-8 text-purple-500 group-hover:scale-110 transition-transform" />
            </div>
          </Card>
          
          <Card className="p-6 bg-white/60 backdrop-blur border-0 shadow-lg">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-2xl font-bold text-gray-900">486</p>
                <p className="text-sm text-gray-600">VIP Clients</p>
              </div>
              <Crown className="w-8 h-8 text-amber-500" />
            </div>
          </Card>
          
          <Card className="p-6 bg-white/60 backdrop-blur border-0 shadow-lg">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-2xl font-bold text-gray-900">47</p>
                <p className="text-sm text-gray-600">Active Repairs</p>
              </div>
              <Wrench className="w-8 h-8 text-orange-500" />
            </div>
          </Card>
        </div>

        {/* Module Grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {jewelryModules.map((module) => (
            <Card 
              key={module.id}
              className="group cursor-pointer bg-white/60 backdrop-blur border-0 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1"
              onClick={() => window.location.href = module.url}
            >
              <div className="p-8">
                <div className="flex items-start justify-between mb-6">
                  <div className={`w-14 h-14 rounded-2xl bg-gradient-to-r ${module.color} flex items-center justify-center group-hover:scale-110 transition-transform duration-300`}>
                    <module.icon className="w-7 h-7 text-white" />
                  </div>
                  <div className="text-right">
                    <code className="text-xs text-gray-400 font-mono">{module.smartCode}</code>
                  </div>
                </div>
                
                <h3 className="text-xl font-semibold text-gray-900 mb-3 group-hover:text-gray-700 transition-colors">
                  {module.title}
                </h3>
                
                <p className="text-gray-600 mb-6 leading-relaxed">
                  {module.description}
                </p>
                
                <div className="space-y-2">
                  {Object.entries(module.metrics).map(([key, value]) => (
                    <div key={key} className="flex justify-between items-center text-sm">
                      <span className="text-gray-500 capitalize">{key.replace(/([A-Z])/g, ' $1').trim()}:</span>
                      <span className="font-medium text-gray-900">{value}</span>
                    </div>
                  ))}
                </div>
              </div>
            </Card>
          ))}
        </div>

        {/* Quick Actions */}
        <div className="mt-16 text-center">
          <h3 className="text-2xl font-light text-gray-900 mb-8">Quick Actions</h3>
          <div className="flex justify-center gap-4">
            <Button 
              className="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 hover:from-purple-700 hover:to-pink-700"
              onClick={() => window.location.href = '/jewelry-progressive/pos'}
            >
              <Plus className="w-4 h-4 mr-2" />
              New Sale
            </Button>
            <Button 
              variant="outline" 
              className="px-8 py-3 border-gray-300 hover:border-purple-300"
              onClick={() => window.location.href = '/jewelry-progressive/inventory'}
            >
              <Package className="w-4 h-4 mr-2" />
              Add Inventory
            </Button>
            <Button 
              variant="outline" 
              className="px-8 py-3 border-gray-300 hover:border-purple-300"
              onClick={() => window.location.href = '/jewelry-progressive/customers'}
            >
              <Users className="w-4 h-4 mr-2" />
              New Customer
            </Button>
          </div>
        </div>

        {/* Footer */}
        <div className="mt-16 text-center text-gray-500 text-sm">
          <p>✨ Powered by HERA Universal Architecture</p>
          <p className="mt-1">One Schema. All Jewelry Operations. Infinite Scalability.</p>
        </div>
      </main>

      {/* Floating Inventory Access */}
      <div className="fixed bottom-6 right-6 z-50">
        <Button 
          onClick={() => window.location.href = '/jewelry-progressive/inventory'}
          className="w-14 h-14 rounded-full bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-2xl hover:from-purple-700 hover:to-pink-700 hover:scale-110 transition-all duration-300"
          title="Quick Access to Inventory"
        >
          <Package className="w-6 h-6" />
        </Button>
      </div>
    </div>
  )
}

export default function Jewelry() {
  const { workspace, isAnonymous, isLoading } = useAuth()

  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-purple-50">
        <div className="text-center">
          <div className="w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl flex items-center justify-center animate-pulse">
            <Gem className="w-8 h-8 text-white" />
          </div>
          <p className="text-gray-600">Loading JewelryMaster Pro...</p>
        </div>
      </div>
    )
  }

  // Public access - jewelry-progressive is publicly accessible

  return <JewelryDashboard />
}