#!/bin/sh

# HERA TypeScript Pre-commit Validation
# Ensures no TypeScript errors are committed

echo "ğŸ” Running TypeScript validation..."

# Check for TypeScript errors
npx tsc --noEmit --pretty

if [ $? -ne 0 ]; then
  echo "âŒ TypeScript errors found! Please fix before committing."
  echo "ğŸ’¡ Tip: Run 'npm run typecheck:fix' to auto-fix common issues"
  exit 1
fi

echo "âœ… TypeScript validation passed!"

# Check for missing imports
node scripts/strict-build-validator.js --quick

if [ $? -ne 0 ]; then
  echo "âŒ Build validation failed! Please fix before committing."
  exit 1
fi

echo "âœ… All checks passed! Proceeding with commit..."