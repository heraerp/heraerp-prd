<!DOCTYPE html>
<html>
<head>
    <title>HERA Jewelry Demo Test</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .step { background: #f8f9fa; padding: 15px; margin: 10px 0; border-left: 4px solid #6366f1; }
        .success { background: #dcfce7; border-color: #22c55e; }
        .error { background: #fee2e2; border-color: #ef4444; }
        code { background: #e5e7eb; padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', monospace; }
        button { background: #6366f1; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; margin: 5px; }
        button:hover { background: #4f46e5; }
        .api-result { background: #f3f4f6; padding: 10px; border-radius: 6px; margin: 10px 0; white-space: pre-wrap; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h1>üîß HERA Jewelry Demo Connection Test</h1>
    
    <div class="step">
        <h3>üìã Test Checklist</h3>
        <p><strong>1. Server Status:</strong> <span id="server-status">Testing...</span></p>
        <p><strong>2. API Health:</strong> <span id="api-status">Testing...</span></p>
        <p><strong>3. Demo Data:</strong> <span id="data-status">Testing...</span></p>
    </div>

    <div class="step">
        <h3>üéØ Access URLs</h3>
        <p><code>Main Login:</code> <a href="http://localhost:3002/login" target="_blank">http://localhost:3002/login</a></p>
        <p><code>Dashboard:</code> <a href="http://localhost:3002/dashboard" target="_blank">http://localhost:3002/dashboard</a></p>
        <p><code>Jewelry Dashboard:</code> <a href="http://localhost:3002/jewelry" target="_blank">http://localhost:3002/jewelry</a></p>
        <p><code>Point of Sale:</code> <a href="http://localhost:3002/jewelry/pos" target="_blank">http://localhost:3002/jewelry/pos</a></p>
    </div>

    <div class="step">
        <h3>üîë Demo Credentials</h3>
        <p><strong>Email:</strong> <code>mario@restaurant.com</code></p>
        <p><strong>Password:</strong> <code>securepass123</code></p>
    </div>

    <div class="step">
        <h3>üß™ API Tests</h3>
        <button onclick="testAPI()">Test Jewelry API</button>
        <button onclick="testProducts()">Get Demo Products</button>
        <button onclick="testAnalytics()">Get Business Analytics</button>
        <div id="api-results"></div>
    </div>

    <div class="step success">
        <h3>‚úÖ Expected Results</h3>
        <p>After login, you should see:</p>
        <ul>
            <li><strong>Dashboard</strong> - 4 business modules including "Jewelry Store"</li>
            <li><strong>Jewelry Dashboard</strong> - 6 jewelry modules (POS, Inventory, etc.)</li>
            <li><strong>Demo Data</strong> - Monthly Revenue: $847K, 2,847 jewelry items, 486 VIP clients</li>
            <li><strong>Point of Sale</strong> - Product catalog with diamond rings, pearls, etc.</li>
        </ul>
    </div>

    <script>
        async function testAPI() {
            const resultsDiv = document.getElementById('api-results');
            resultsDiv.innerHTML = '<div class="api-result">Testing API health...</div>';
            
            try {
                const response = await fetch('/api/v1/jewelry?action=health&organization_id=demo-org');
                const result = await response.json();
                resultsDiv.innerHTML = '<div class="api-result success">‚úÖ API Health Check:\n' + JSON.stringify(result, null, 2) + '</div>';
            } catch (error) {
                resultsDiv.innerHTML = '<div class="api-result error">‚ùå API Error: ' + error.message + '</div>';
            }
        }

        async function testProducts() {
            const resultsDiv = document.getElementById('api-results');
            resultsDiv.innerHTML = '<div class="api-result">Fetching demo products...</div>';
            
            try {
                const response = await fetch('/api/v1/jewelry?action=products&organization_id=demo-org');
                const result = await response.json();
                resultsDiv.innerHTML = '<div class="api-result success">‚úÖ Demo Products (' + result.total + ' items):\n' + JSON.stringify(result.data, null, 2) + '</div>';
            } catch (error) {
                resultsDiv.innerHTML = '<div class="api-result error">‚ùå Products Error: ' + error.message + '</div>';
            }
        }

        async function testAnalytics() {
            const resultsDiv = document.getElementById('api-results');
            resultsDiv.innerHTML = '<div class="api-result">Fetching business analytics...</div>';
            
            try {
                const response = await fetch('/api/v1/jewelry', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'get_analytics',
                        organization_id: 'demo-org'
                    })
                });
                const result = await response.json();
                resultsDiv.innerHTML = '<div class="api-result success">‚úÖ Business Analytics:\n' + JSON.stringify(result.data, null, 2) + '</div>';
            } catch (error) {
                resultsDiv.innerHTML = '<div class="api-result error">‚ùå Analytics Error: ' + error.message + '</div>';
            }
        }

        // Auto-test on page load
        window.addEventListener('load', function() {
            // Test if we can reach the server
            fetch('/api/v1/jewelry?action=health&organization_id=demo-org')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('server-status').innerHTML = '‚úÖ Running on port 3002';
                    document.getElementById('api-status').innerHTML = '‚úÖ ' + data.message;
                    document.getElementById('data-status').innerHTML = '‚úÖ Demo data loaded';
                })
                .catch(error => {
                    document.getElementById('server-status').innerHTML = '‚ùå Server not responding';
                    document.getElementById('api-status').innerHTML = '‚ùå API unreachable';
                    document.getElementById('data-status').innerHTML = '‚ùå Cannot verify data';
                });
        });
    </script>
</body>
</html>