{
  "framework_info": {
    "framework_name": "Universal Posting Rules Framework",
    "version": "1.0.0",
    "description": "Smart code-driven journal entry posting rules that adapt by industry",
    "created_at": "2024-01-01T00:00:00Z",
    "updated_at": "2024-01-01T00:00:00Z"
  },
  "universal_patterns": {
    "sales_transaction": {
      "pattern_id": "UNIVERSAL_SALES",
      "description": "Universal sales transaction posting pattern",
      "smart_code_pattern": "HERA.*.SALE.*",
      "default_posting": {
        "debit_accounts": ["1100000", "1200000"],
        "credit_accounts": ["4100000", "2300000"],
        "posting_logic": {
          "cash_sale": {
            "condition": "payment_method = 'cash'",
            "debit": ["1100000"],
            "credit": ["4100000", "2300000"]
          },
          "credit_sale": {
            "condition": "payment_method = 'credit'",
            "debit": ["1200000"],
            "credit": ["4100000", "2300000"]
          }
        }
      },
      "industry_adaptations": {
        "restaurant": {
          "smart_code": "HERA.REST.SALE.ORDER.v1",
          "credit_accounts": ["4110000", "4120000", "4130000", "4140000", "2300000"],
          "account_determination": {
            "food_sales": "4110000",
            "beverage_sales": "4120000",
            "delivery_revenue": "4130000",
            "sales_tax": "2300000"
          }
        },
        "healthcare": {
          "smart_code": "HERA.HLTH.SALE.PAT.SRV.v1",
          "credit_accounts": ["4110000", "4160000"],
          "account_determination": {
            "patient_service": "4110000",
            "insurance_portion": "4160000"
          }
        },
        "retail": {
          "smart_code": "HERA.RET.SALE.v1",
          "credit_accounts": ["4110000", "4120000", "2300000"],
          "account_determination": {
            "retail_sales": "4110000",
            "online_sales": "4120000",
            "sales_tax": "2300000"
          }
        },
        "manufacturing": {
          "smart_code": "HERA.MFG.SALE.PROD.v1",
          "credit_accounts": ["4110000", "4120000", "2300000"],
          "account_determination": {
            "product_sales": "4110000",
            "custom_manufacturing": "4120000",
            "sales_tax": "2300000"
          }
        },
        "professional_services": {
          "smart_code": "HERA.PROF.SALE.SRV.v1",
          "credit_accounts": ["4110000", "4120000", "4130000"],
          "account_determination": {
            "professional_fees": "4110000",
            "consulting_revenue": "4120000",
            "project_revenue": "4140000"
          }
        }
      }
    },
    "cost_of_goods_sold": {
      "pattern_id": "UNIVERSAL_COGS",
      "description": "Universal cost of goods sold posting pattern",
      "smart_code_pattern": "HERA.*.COGS.*",
      "default_posting": {
        "debit_accounts": ["5000000"],
        "credit_accounts": ["1300000"],
        "posting_logic": {
          "inventory_reduction": {
            "condition": "inventory_method = 'perpetual'",
            "debit": ["5000000"],
            "credit": ["1300000"]
          }
        }
      },
      "industry_adaptations": {
        "restaurant": {
          "smart_code": "HERA.REST.COGS.FOOD.v1",
          "debit_accounts": ["5100000", "5110000"],
          "credit_accounts": ["1300000", "1310000"],
          "account_determination": {
            "food_cost": {"debit": "5100000", "credit": "1300000"},
            "beverage_cost": {"debit": "5110000", "credit": "1310000"}
          }
        },
        "healthcare": {
          "smart_code": "HERA.HLTH.COGS.MED.SUP.v1",
          "debit_accounts": ["5010000", "5020000"],
          "credit_accounts": ["1330000", "1340000"],
          "account_determination": {
            "medical_supplies": {"debit": "5010000", "credit": "1330000"},
            "pharmaceuticals": {"debit": "5020000", "credit": "1340000"}
          }
        },
        "retail": {
          "smart_code": "HERA.RET.COGS.v1",
          "debit_accounts": ["5010000"],
          "credit_accounts": ["1330000"],
          "account_determination": {
            "merchandise_cost": {"debit": "5010000", "credit": "1330000"}
          }
        },
        "manufacturing": {
          "smart_code": "HERA.MFG.COGS.v1",
          "debit_accounts": ["5000000"],
          "credit_accounts": ["1350000"],
          "account_determination": {
            "finished_goods_cost": {"debit": "5000000", "credit": "1350000"}
          }
        }
      }
    },
    "labor_allocation": {
      "pattern_id": "UNIVERSAL_LABOR",
      "description": "Universal labor cost allocation pattern",
      "smart_code_pattern": "HERA.*.LABOR.*",
      "default_posting": {
        "debit_accounts": ["5200000"],
        "credit_accounts": ["2200000"],
        "posting_logic": {
          "wage_accrual": {
            "condition": "payment_status = 'accrued'",
            "debit": ["5200000"],
            "credit": ["2200000"]
          }
        }
      },
      "industry_adaptations": {
        "restaurant": {
          "smart_code": "HERA.REST.LABOR.KITCHEN.v1",
          "debit_accounts": ["5210000", "5220000"],
          "credit_accounts": ["2200000"],
          "account_determination": {
            "kitchen_staff": {"debit": "5210000", "credit": "2200000"},
            "service_staff": {"debit": "5220000", "credit": "2200000"}
          }
        },
        "healthcare": {
          "smart_code": "HERA.HLTH.LABOR.v1",
          "debit_accounts": ["5220000", "5230000", "5240000"],
          "credit_accounts": ["2200000"],
          "account_determination": {
            "physicians": {"debit": "5220000", "credit": "2200000"},
            "nursing_staff": {"debit": "5230000", "credit": "2200000"},
            "admin_staff": {"debit": "5240000", "credit": "2200000"}
          }
        },
        "manufacturing": {
          "smart_code": "HERA.MFG.LABOR.DIR.v1",
          "debit_accounts": ["5020000", "5050000"],
          "credit_accounts": ["2200000"],
          "account_determination": {
            "direct_labor": {"debit": "5020000", "credit": "2200000"},
            "indirect_labor": {"debit": "5050000", "credit": "2200000"}
          }
        }
      }
    },
    "inventory_purchase": {
      "pattern_id": "UNIVERSAL_PURCHASE",
      "description": "Universal inventory purchase posting pattern",
      "smart_code_pattern": "HERA.*.PURCHASE.*",
      "default_posting": {
        "debit_accounts": ["1300000"],
        "credit_accounts": ["2100000"],
        "posting_logic": {
          "credit_purchase": {
            "condition": "payment_terms != 'cash'",
            "debit": ["1300000"],
            "credit": ["2100000"]
          },
          "cash_purchase": {
            "condition": "payment_terms = 'cash'",
            "debit": ["1300000"],
            "credit": ["1100000"]
          }
        }
      },
      "industry_adaptations": {
        "restaurant": {
          "smart_code": "HERA.REST.PURCHASE.FOOD.v1",
          "debit_accounts": ["1300000", "1310000", "1320000"],
          "credit_accounts": ["2100000"],
          "account_determination": {
            "food_inventory": {"debit": "1300000", "credit": "2100000"},
            "beverage_inventory": {"debit": "1310000", "credit": "2100000"},
            "supply_inventory": {"debit": "1320000", "credit": "2100000"}
          }
        },
        "healthcare": {
          "smart_code": "HERA.HLTH.PURCHASE.MED.v1",
          "debit_accounts": ["1330000", "1340000", "1350000"],
          "credit_accounts": ["2100000"],
          "account_determination": {
            "medical_supplies": {"debit": "1330000", "credit": "2100000"},
            "pharmaceuticals": {"debit": "1340000", "credit": "2100000"},
            "lab_supplies": {"debit": "1350000", "credit": "2100000"}
          }
        },
        "manufacturing": {
          "smart_code": "HERA.MFG.PURCHASE.RAW.v1",
          "debit_accounts": ["1330000", "1360000", "1370000"],
          "credit_accounts": ["2100000"],
          "account_determination": {
            "raw_materials": {"debit": "1330000", "credit": "2100000"},
            "maintenance_supplies": {"debit": "1360000", "credit": "2100000"},
            "packaging_materials": {"debit": "1370000", "credit": "2100000"}
          }
        }
      }
    },
    "payment_processing": {
      "pattern_id": "UNIVERSAL_PAYMENT",
      "description": "Universal payment processing pattern",
      "smart_code_pattern": "HERA.*.PAYMENT.*",
      "default_posting": {
        "debit_accounts": ["1100000"],
        "credit_accounts": ["1200000", "2100000"],
        "posting_logic": {
          "customer_payment": {
            "condition": "payment_type = 'receivable'",
            "debit": ["1100000"],
            "credit": ["1200000"]
          },
          "vendor_payment": {
            "condition": "payment_type = 'payable'",
            "debit": ["2100000"],
            "credit": ["1100000"]
          }
        }
      },
      "industry_adaptations": {
        "healthcare": {
          "smart_code": "HERA.HLTH.PAYMENT.INS.v1",
          "debit_accounts": ["1100000"],
          "credit_accounts": ["1240000", "1250000", "1260000"],
          "account_determination": {
            "patient_payment": {"debit": "1100000", "credit": "1240000"},
            "insurance_payment": {"debit": "1100000", "credit": "1250000"},
            "medicare_payment": {"debit": "1100000", "credit": "1260000"}
          }
        },
        "professional_services": {
          "smart_code": "HERA.PROF.PAYMENT.CLI.v1",
          "debit_accounts": ["1100000"],
          "credit_accounts": ["1200000", "1230000"],
          "account_determination": {
            "invoiced_services": {"debit": "1100000", "credit": "1200000"},
            "unbilled_services": {"debit": "1100000", "credit": "1230000"}
          }
        }
      }
    }
  },
  "smart_code_engine": {
    "account_determination_logic": {
      "pattern_matching": {
        "exact_match": {
          "priority": 1,
          "description": "Direct smart code to account mapping"
        },
        "pattern_match": {
          "priority": 2,
          "description": "Smart code pattern matching with wildcards"
        },
        "industry_fallback": {
          "priority": 3,
          "description": "Industry-specific default accounts"
        },
        "universal_fallback": {
          "priority": 4,
          "description": "Universal base accounts"
        }
      }
    },
    "validation_rules": {
      "balance_check": {
        "description": "Ensure debits equal credits",
        "required": true
      },
      "account_existence": {
        "description": "Verify all accounts exist in COA",
        "required": true
      },
      "smart_code_validation": {
        "description": "Validate smart code format and logic",
        "required": true
      }
    }
  },
  "posting_automation": {
    "triggers": [
      {
        "trigger_name": "sales_transaction_complete",
        "smart_code_pattern": "HERA.*.SALE.*",
        "auto_post": true,
        "posting_pattern": "sales_transaction"
      },
      {
        "trigger_name": "inventory_movement",
        "smart_code_pattern": "HERA.*.INV.*",
        "auto_post": true,
        "posting_pattern": "inventory_purchase"
      },
      {
        "trigger_name": "cost_allocation",
        "smart_code_pattern": "HERA.*.COGS.*",
        "auto_post": true,
        "posting_pattern": "cost_of_goods_sold"
      },
      {
        "trigger_name": "labor_distribution",
        "smart_code_pattern": "HERA.*.LABOR.*",
        "auto_post": true,
        "posting_pattern": "labor_allocation"
      }
    ]
  }
}